"use strict";(self.webpackChunknabd=self.webpackChunknabd||[]).push([[592],{3570:(M,p,n)=>{n.d(p,{G:()=>_,N:()=>d});var i=n(4107),t=n(5879);const _=(l,u,c=(0,t.f3M)(i.a))=>c.getLocations(0,100),d=(l,u,c=(0,t.f3M)(i.a))=>c.getLocation(l.paramMap.get("id"))},8235:(M,p,n)=>{n.d(p,{k:()=>F});var i=n(1180),t=n(5879),_=n(5313),d=n(3365),l=n(1933),u=n(2787),c=n(7921),E=n(4664),v=n(6306),P=n(2096),Z=n(7398),T=n(4107),C=n(7134),D=n(9280),O=n(4698),A=n(304),U=n(7700),g=n(617),x=n(6593),h=n(6814),I=n(2296),L=n(6007);const R=["addRegionTemp"];function b(e,o){if(1&e&&(t.TgZ(0,"a",16)(1,"button",17)(2,"span",18),t._UZ(3,"mat-icon",19),t._uU(4," \u0625\u0636\u0627\u0641\u0629 \u062d\u0627\u0644\u0629 "),t.qZA()()()),2&e){const s=t.oxw();t.MGl("routerLink","/patients/create/",s.route.snapshot.paramMap.get("id"),"")}}function B(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1," \u0627\u0633\u0645 \u0627\u0644\u062d\u0627\u0644\u0629"),t.qZA())}function W(e,o){if(1&e&&(t.TgZ(0,"td",21)(1,"a",22),t._uU(2),t.qZA()()),2&e){const s=o.$implicit;t.xp6(1),t.Q6J("routerLink","/patients/"+s.id+"/details/"),t.xp6(1),t.hij(" ",s.name," ")}}function w(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1," \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"),t.qZA())}function K(e,o){if(1&e&&(t.TgZ(0,"a",25),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.Q6J("href","tel:"+s,t.LSH),t.xp6(1),t.hij(" ",s," ")}}function S(e,o){if(1&e&&(t.TgZ(0,"td",23),t.YNc(1,K,2,2,"a",24),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.Q6J("ngForOf",s.mobileNumbers)}}function N(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1," \u0625\u062c\u0631\u0627\u0621\u0627\u062a"),t.qZA())}function y(e,o){if(1&e&&(t.TgZ(0,"a",22)(1,"button",34)(2,"span",18),t._UZ(3,"mat-icon",19),t._uU(4," \u062a\u0639\u062f\u064a\u0644 "),t.qZA()()()),2&e){const s=t.oxw().$implicit;t.Q6J("routerLink","/patients/"+s.id+"/edit")}}function Q(e,o){if(1&e){const s=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(s);const r=t.oxw().$implicit,m=t.oxw();return t.KtG(m.deletePatient(r))}),t.TgZ(1,"span",18),t._UZ(2,"mat-icon",36),t._uU(3," \u062d\u0630\u0641 "),t.qZA()()}}function H(e,o){if(1&e){const s=t.EpF();t.TgZ(0,"td",23)(1,"div",26),t.YNc(2,y,5,1,"a",27),t.YNc(3,Q,4,0,"button",28),t.TgZ(4,"button",29)(5,"span",18),t._UZ(6,"mat-icon",30),t._uU(7," \u0637\u0628\u0627\u0639\u0629 "),t.qZA()(),t.TgZ(8,"button",31),t.NdJ("click",function(){const m=t.CHM(s).$implicit,f=t.oxw();return t.KtG(f.disablePatient(m))}),t.TgZ(9,"span",32),t._UZ(10,"mat-icon",33),t._uU(11,"\n\u062a\u0639\u0637\u064a\u0644 "),t.qZA()(),t.TgZ(12,"a",22)(13,"button",34),t._UZ(14,"mat-icon",35),t._uU(15," \u0627\u0644\u0627\u062f\u0648\u064a\u0629 "),t.qZA()()()()}if(2&e){const s=o.$implicit,a=t.oxw();t.xp6(2),t.Q6J("ngIf",!a.authService.isUserNormal()),t.xp6(1),t.Q6J("ngIf",a.authService.isUserSuperAdmin()),t.xp6(9),t.Q6J("routerLink","/patients/"+s.id+"/details/")}}function Y(e,o){1&e&&t._UZ(0,"tr",37)}function J(e,o){1&e&&t._UZ(0,"tr",38)}function q(e,o){1&e&&t._UZ(0,"mat-progress-bar",39)}const j=function(){return[10,25,100]};let F=(()=>{var e;class o{constructor(a,r,m){(0,i.Z)(this,"dialog",void 0),(0,i.Z)(this,"iconRegistry",void 0),(0,i.Z)(this,"sanitizer",void 0),(0,i.Z)(this,"displayedColumns",["name","phone","action"]),(0,i.Z)(this,"dataSource",new _.by),(0,i.Z)(this,"name",""),(0,i.Z)(this,"isLoading",!0),(0,i.Z)(this,"totalElements",10),(0,i.Z)(this,"paginator",void 0),(0,i.Z)(this,"addRegionTemp",void 0),(0,i.Z)(this,"route",(0,t.f3M)(u.gz)),(0,i.Z)(this,"router",(0,t.f3M)(u.F0)),(0,i.Z)(this,"authService",(0,t.f3M)(A.e)),(0,i.Z)(this,"locationService",(0,t.f3M)(T.a)),(0,i.Z)(this,"medicineService",(0,t.f3M)(C.A)),(0,i.Z)(this,"patientService",(0,t.f3M)(D.e)),(0,i.Z)(this,"toast",(0,t.f3M)(O.jE)),this.dialog=a,this.iconRegistry=r,this.sanitizer=m,r.addSvgIconLiteral("medicine",m.bypassSecurityTrustHtml('\n<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m678-134 46-46-64-64-46 46q-14 14-14 32t14 32q14 14 32 14t32-14Zm102-102 46-46q14-14 14-32t-14-32q-14-14-32-14t-32 14l-46 46 64 64ZM735-77q-37 37-89 37t-89-37q-37-37-37-89t37-89l148-148q37-37 89-37t89 37q37 37 37 89t-37 89L735-77ZM200-200v-560 560Zm0 80q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h168q13-36 43.5-58t68.5-22q38 0 68.5 22t43.5 58h168q33 0 56.5 23.5T840-760v245q-20-5-40-5t-40 3v-243H200v560h243q-3 20-3 40t5 40H200Zm280-670q13 0 21.5-8.5T510-820q0-13-8.5-21.5T480-850q-13 0-21.5 8.5T450-820q0 13 8.5 21.5T480-790ZM280-600v-80h400v80H280Zm0 160v-80h400v34q-8 5-15.5 11.5T649-460l-20 20H280Zm0 160v-80h269l-49 49q-8 8-14.5 15.5T474-280H280Z"/></svg>\n'))}ngOnInit(){this.route.data.subscribe(a=>{this.name=a.name})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.paginator.page.pipe((0,c.O)({}),(0,E.w)(()=>(this.isLoading=!0,this.getPatient().pipe((0,v.K)(()=>(0,P.of)(null))))),(0,Z.U)(a=>null==a?[]:(this.totalElements=a.totalElements,this.isLoading=!1,a.data))).subscribe(a=>{this.dataSource=new _.by(a)})}getPatient(){return this.router.url.includes("locations")?this.locationService.getPatient(this.paginator.pageIndex,this.paginator.pageSize,this.route.snapshot.paramMap.get("id")):this.medicineService.getPatients(this.route.snapshot.paramMap.get("id"))}deletePatient(a){this.dialog.open(l.h,{disableClose:!0,data:{message:`\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0627\u0643\u062f \u0627\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 ${a.name} `}}).afterClosed().subscribe(m=>{})}disablePatient(a){this.dialog.open(l.h,{disableClose:!0,data:{message:"\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0627\u0643\u062f \u0627\u0646\u0643 \u062a\u0631\u064a\u062f \u062a\u0639\u0637\u064a\u0644 \u0627\u0644\u062d\u0627\u0644\u0629 "+a.name+"\u061f"}}).afterClosed().subscribe(m=>{this.patientService.deactivatePatient(a.id).subscribe(f=>{this.toast.success("\u062a\u0645 \u062a\u0639\u0637\u064a\u0644 \u0627\u0644\u062d\u0627\u0644\u0629",{duration:5e3,position:"top-right",theme:"snackbar"})})})}}return e=o,(0,i.Z)(o,"\u0275fac",function(a){return new(a||e)(t.Y36(U.uw),t.Y36(g.jv),t.Y36(x.H7))}),(0,i.Z)(o,"\u0275cmp",t.Xpm({type:e,selectors:[["app-patients-management"]],viewQuery:function(a,r){if(1&a&&(t.Gf(d.NW,5),t.Gf(R,5)),2&a){let m;t.iGM(m=t.CRH())&&(r.paginator=m.first),t.iGM(m=t.CRH())&&(r.addRegionTemp=m.first)}},decls:20,vars:10,consts:[[1,"text-2xl","border-r-4","border-r-primary-500","font-bold","text-primary-500","mr-5","pr-2","mb-8","mt-10"],["class","block mr-auto",3,"routerLink",4,"ngIf"],[1,"mt-10","px-10"],[1,"mat-elevation-z8","w-full"],[1,"overflow-x-auto"],["mat-table","",1,"rounded-lg",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","whitespace-nowrap",4,"matCellDef"],["matColumnDef","phone"],["mat-cell","",4,"matCellDef"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mode","indeterminate",4,"ngIf"],[3,"length","pageSize","pageSizeOptions"],[1,"block","mr-auto",3,"routerLink"],["mat-raised-button","","color","primary",1,"mt-10","mr-auto","!block","ml-10"],[1,"flex","gap-2.5"],["aria-hidden","false","fontIcon","edit"],["mat-header-cell",""],["mat-cell","",1,"whitespace-nowrap"],[3,"routerLink"],["mat-cell",""],["class","underline whitespace-nowrap",3,"href",4,"ngFor","ngForOf"],[1,"underline","whitespace-nowrap",3,"href"],[1,"gap-3.5","flex"],[3,"routerLink",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button",""],["aria-hidden","false","fontIcon","print"],["mat-raised-button","","color","warn",3,"click"],[1,"flex","gap-2.5","items-center","whitespace-nowrap"],["aria-hidden","false","fontIcon","pause"],["mat-raised-button","","color","primary"],["svgIcon","medicine","aria-hidden","false"],["aria-hidden","false","fontIcon","delete"],["mat-header-row",""],["mat-row",""],["mode","indeterminate"]],template:function(a,r){1&a&&(t.TgZ(0,"h3",0),t._uU(1),t.qZA(),t.YNc(2,b,5,1,"a",1),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"table",5),t.ynx(7,6),t.YNc(8,B,2,0,"th",7),t.YNc(9,W,3,2,"td",8),t.BQk(),t.ynx(10,9),t.YNc(11,w,2,0,"th",7),t.YNc(12,S,2,1,"td",10),t.BQk(),t.ynx(13,11),t.YNc(14,N,2,0,"th",7),t.YNc(15,H,16,3,"td",10),t.BQk(),t.YNc(16,Y,1,0,"tr",12),t.YNc(17,J,1,0,"tr",13),t.qZA()(),t.YNc(18,q,1,0,"mat-progress-bar",14),t._UZ(19,"mat-paginator",15),t.qZA()()),2&a&&(t.xp6(1),t.Oqu(r.name),t.xp6(1),t.Q6J("ngIf",r.authService.isUserSuperAdmin()),t.xp6(4),t.Q6J("dataSource",r.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("ngIf",r.isLoading),t.xp6(1),t.Q6J("length",r.totalElements)("pageSize",10)("pageSizeOptions",t.DdM(9,j)))},dependencies:[h.sg,h.O5,u.rH,g.Hw,I.lW,d.NW,L.pW,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk]})),o})()}}]);