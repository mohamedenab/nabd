"use strict";(self.webpackChunknabd=self.webpackChunknabd||[]).push([[592],{3570:(v,h,e)=>{e.d(h,{G:()=>_,N:()=>c});var a=e(782),t=e(5879);const _=(p,d,m=(0,t.f3M)(a.a))=>m.getLocations(0,100),c=(p,d,m=(0,t.f3M)(a.a))=>m.getLocation(p.paramMap.get("id"))},9766:(v,h,e)=>{e.d(h,{$:()=>d});var a=e(1180),t=e(553),_=e(7398),c=e(5879),p=e(9862);let d=(()=>{var m;class g{constructor(u){(0,a.Z)(this,"http",void 0),(0,a.Z)(this,"baseUrl",t.N.print),this.http=u}printAll(){return this.http.get(`${this.baseUrl}`).pipe((0,_.U)(u=>u.data))}printLocation(u){return this.http.get(`${this.baseUrl}/location/${u}`).pipe((0,_.U)(f=>f.data))}printPatient(u){return this.http.get(`${this.baseUrl}/patient/${u}`).pipe((0,_.U)(f=>f.data))}}return m=g,(0,a.Z)(g,"\u0275fac",function(u){return new(u||m)(c.LFG(p.eN))}),(0,a.Z)(g,"\u0275prov",c.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})),g})()},8235:(v,h,e)=>{e.d(h,{k:()=>z});var a=e(1180),t=e(5879),_=e(5313),c=e(3365),p=e(1933),d=e(2787),m=e(7921),g=e(4664),P=e(6306),u=e(2096),f=e(7398),C=e(782),T=e(7134),Z=e(9280),O=e(4698),U=e(304),A=e(9766),x=e(7700),E=e(617),I=e(6593),D=e(6814),L=e(2296),b=e(6007);const R=["addRegionTemp"];function B(n,s){if(1&n&&(t.TgZ(0,"a",16)(1,"button",17)(2,"span",18),t._UZ(3,"mat-icon",19),t._uU(4," \u0625\u0636\u0627\u0641\u0629 \u062d\u0627\u0644\u0629 "),t.qZA()()()),2&n){const r=t.oxw();t.MGl("routerLink","/patients/create/",r.route.snapshot.paramMap.get("id"),"")}}function K(n,s){1&n&&(t.TgZ(0,"th",20),t._uU(1," \u0627\u0633\u0645 \u0627\u0644\u062d\u0627\u0644\u0629"),t.qZA())}function W(n,s){if(1&n&&(t.TgZ(0,"td",21)(1,"a",22),t._uU(2),t.qZA()()),2&n){const r=s.$implicit;t.xp6(1),t.Q6J("routerLink","/patients/"+r.id+"/details/"),t.xp6(1),t.hij(" ",r.name," ")}}function S(n,s){1&n&&(t.TgZ(0,"th",20),t._uU(1," \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"),t.qZA())}function N(n,s){if(1&n&&(t.TgZ(0,"a",25),t._uU(1),t.qZA()),2&n){const r=s.$implicit;t.Q6J("href","tel:"+r,t.LSH),t.xp6(1),t.hij(" ",r," ")}}function w(n,s){if(1&n&&(t.TgZ(0,"td",23),t.YNc(1,N,2,2,"a",24),t.qZA()),2&n){const r=s.$implicit;t.xp6(1),t.Q6J("ngForOf",r.mobileNumbers)}}function y(n,s){1&n&&(t.TgZ(0,"th",20),t._uU(1," \u0625\u062c\u0631\u0627\u0621\u0627\u062a"),t.qZA())}function Q(n,s){if(1&n&&(t.TgZ(0,"a",22)(1,"button",34)(2,"span",18),t._UZ(3,"mat-icon",19),t._uU(4," \u062a\u0639\u062f\u064a\u0644 "),t.qZA()()()),2&n){const r=t.oxw().$implicit;t.Q6J("routerLink","/patients/"+r.id+"/edit")}}function H(n,s){if(1&n){const r=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(r);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.deletePatient(i))}),t.TgZ(1,"span",18),t._UZ(2,"mat-icon",36),t._uU(3," \u062d\u0630\u0641 "),t.qZA()()}}function Y(n,s){if(1&n){const r=t.EpF();t.TgZ(0,"td",23)(1,"div",26),t.YNc(2,Q,5,1,"a",27),t.YNc(3,H,4,0,"button",28),t.TgZ(4,"button",29),t.NdJ("click",function(){const l=t.CHM(r).$implicit,M=t.oxw();return t.KtG(M.printPatient(l.id))}),t.TgZ(5,"span",18),t._UZ(6,"mat-icon",30),t._uU(7," \u0637\u0628\u0627\u0639\u0629 "),t.qZA()(),t.TgZ(8,"button",31),t.NdJ("click",function(){const l=t.CHM(r).$implicit,M=t.oxw();return t.KtG(M.disablePatient(l))}),t.TgZ(9,"span",32),t._UZ(10,"mat-icon",33),t._uU(11,"\n\u062a\u0639\u0637\u064a\u0644 "),t.qZA()(),t.TgZ(12,"a",22)(13,"button",34),t._UZ(14,"mat-icon",35),t._uU(15," \u0627\u0644\u0627\u062f\u0648\u064a\u0629 "),t.qZA()()()()}if(2&n){const r=s.$implicit,o=t.oxw();t.xp6(2),t.Q6J("ngIf",!o.authService.isUserNormal()),t.xp6(1),t.Q6J("ngIf",o.authService.isUserSuperAdmin()),t.xp6(9),t.Q6J("routerLink","/patients/"+r.id+"/details/")}}function J(n,s){1&n&&t._UZ(0,"tr",37)}function $(n,s){1&n&&t._UZ(0,"tr",38)}function j(n,s){1&n&&t._UZ(0,"mat-progress-bar",39)}const F=function(){return[10,25,100]};let z=(()=>{var n;class s{constructor(o,i,l){(0,a.Z)(this,"dialog",void 0),(0,a.Z)(this,"iconRegistry",void 0),(0,a.Z)(this,"sanitizer",void 0),(0,a.Z)(this,"displayedColumns",["name","phone","action"]),(0,a.Z)(this,"dataSource",new _.by),(0,a.Z)(this,"name",""),(0,a.Z)(this,"isLoading",!0),(0,a.Z)(this,"totalElements",10),(0,a.Z)(this,"paginator",void 0),(0,a.Z)(this,"addRegionTemp",void 0),(0,a.Z)(this,"route",(0,t.f3M)(d.gz)),(0,a.Z)(this,"router",(0,t.f3M)(d.F0)),(0,a.Z)(this,"authService",(0,t.f3M)(U.e)),(0,a.Z)(this,"locationService",(0,t.f3M)(C.a)),(0,a.Z)(this,"medicineService",(0,t.f3M)(T.A)),(0,a.Z)(this,"patientService",(0,t.f3M)(Z.e)),(0,a.Z)(this,"toast",(0,t.f3M)(O.jE)),(0,a.Z)(this,"printService",(0,t.f3M)(A.$)),this.dialog=o,this.iconRegistry=i,this.sanitizer=l,i.addSvgIconLiteral("medicine",l.bypassSecurityTrustHtml('\n<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m678-134 46-46-64-64-46 46q-14 14-14 32t14 32q14 14 32 14t32-14Zm102-102 46-46q14-14 14-32t-14-32q-14-14-32-14t-32 14l-46 46 64 64ZM735-77q-37 37-89 37t-89-37q-37-37-37-89t37-89l148-148q37-37 89-37t89 37q37 37 37 89t-37 89L735-77ZM200-200v-560 560Zm0 80q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h168q13-36 43.5-58t68.5-22q38 0 68.5 22t43.5 58h168q33 0 56.5 23.5T840-760v245q-20-5-40-5t-40 3v-243H200v560h243q-3 20-3 40t5 40H200Zm280-670q13 0 21.5-8.5T510-820q0-13-8.5-21.5T480-850q-13 0-21.5 8.5T450-820q0 13 8.5 21.5T480-790ZM280-600v-80h400v80H280Zm0 160v-80h400v34q-8 5-15.5 11.5T649-460l-20 20H280Zm0 160v-80h269l-49 49q-8 8-14.5 15.5T474-280H280Z"/></svg>\n'))}ngOnInit(){this.route.data.subscribe(o=>{this.name=o.name})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.route.params.subscribe(o=>{this.paginator.page.pipe((0,m.O)({}),(0,g.w)(()=>(this.isLoading=!0,this.getPatient().pipe((0,P.K)(()=>(0,u.of)(null))))),(0,f.U)(i=>null==i?[]:(this.totalElements=i.totalElements,this.isLoading=!1,i.data))).subscribe(i=>{this.dataSource=new _.by(i)})})}getPatient(){return this.router.url.includes("locations")?this.locationService.getPatient(this.paginator.pageIndex,this.paginator.pageSize,this.route.snapshot.paramMap.get("id")):this.medicineService.getPatients(this.route.snapshot.paramMap.get("id"))}deletePatient(o){this.dialog.open(p.h,{disableClose:!0,data:{message:`\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0627\u0643\u062f \u0627\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 ${o.name} `}}).afterClosed().subscribe(l=>{l&&this.patientService.deletePatient(o.id).subscribe(M=>{this.toast.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u062d\u0627\u0644\u0629",{duration:5e3,position:"top-right",theme:"snackbar"})})})}disablePatient(o){this.dialog.open(p.h,{disableClose:!0,data:{message:"\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0627\u0643\u062f \u0627\u0646\u0643 \u062a\u0631\u064a\u062f \u062a\u0639\u0637\u064a\u0644 \u0627\u0644\u062d\u0627\u0644\u0629 "+o.name+"\u061f"}}).afterClosed().subscribe(l=>{l&&this.patientService.deactivatePatient(o.id).subscribe(M=>{this.toast.success("\u062a\u0645 \u062a\u0639\u0637\u064a\u0644 \u0627\u0644\u062d\u0627\u0644\u0629",{duration:5e3,position:"top-right",theme:"snackbar"})})})}printPatient(o){this.printService.printPatient(o).subscribe(i=>{this.router.navigate(["/print"],{state:{data:[{patientPrintDtos:[i]}]}})})}}return n=s,(0,a.Z)(s,"\u0275fac",function(o){return new(o||n)(t.Y36(x.uw),t.Y36(E.jv),t.Y36(I.H7))}),(0,a.Z)(s,"\u0275cmp",t.Xpm({type:n,selectors:[["app-patients-management"]],viewQuery:function(o,i){if(1&o&&(t.Gf(c.NW,5),t.Gf(R,5)),2&o){let l;t.iGM(l=t.CRH())&&(i.paginator=l.first),t.iGM(l=t.CRH())&&(i.addRegionTemp=l.first)}},decls:20,vars:10,consts:[[1,"text-2xl","border-r-4","border-r-primary-500","font-bold","text-primary-500","mr-5","pr-2","mb-8","mt-10"],["class","block mr-auto",3,"routerLink",4,"ngIf"],[1,"mt-10","px-10"],[1,"mat-elevation-z8","w-full"],[1,"overflow-x-auto"],["mat-table","",1,"rounded-lg",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","whitespace-nowrap",4,"matCellDef"],["matColumnDef","phone"],["mat-cell","",4,"matCellDef"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mode","indeterminate",4,"ngIf"],[3,"length","pageSize","pageSizeOptions"],[1,"block","mr-auto",3,"routerLink"],["mat-raised-button","","color","primary",1,"mt-10","mr-auto","!block","ml-10"],[1,"flex","gap-2.5"],["aria-hidden","false","fontIcon","edit"],["mat-header-cell",""],["mat-cell","",1,"whitespace-nowrap"],[3,"routerLink"],["mat-cell",""],["class","underline whitespace-nowrap",3,"href",4,"ngFor","ngForOf"],[1,"underline","whitespace-nowrap",3,"href"],[1,"gap-3.5","flex"],[3,"routerLink",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","",3,"click"],["aria-hidden","false","fontIcon","print"],["mat-raised-button","","color","warn",3,"click"],[1,"flex","gap-2.5","items-center","whitespace-nowrap"],["aria-hidden","false","fontIcon","pause"],["mat-raised-button","","color","primary"],["svgIcon","medicine","aria-hidden","false"],["aria-hidden","false","fontIcon","delete"],["mat-header-row",""],["mat-row",""],["mode","indeterminate"]],template:function(o,i){1&o&&(t.TgZ(0,"h3",0),t._uU(1),t.qZA(),t.YNc(2,B,5,1,"a",1),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"table",5),t.ynx(7,6),t.YNc(8,K,2,0,"th",7),t.YNc(9,W,3,2,"td",8),t.BQk(),t.ynx(10,9),t.YNc(11,S,2,0,"th",7),t.YNc(12,w,2,1,"td",10),t.BQk(),t.ynx(13,11),t.YNc(14,y,2,0,"th",7),t.YNc(15,Y,16,3,"td",10),t.BQk(),t.YNc(16,J,1,0,"tr",12),t.YNc(17,$,1,0,"tr",13),t.qZA()(),t.YNc(18,j,1,0,"mat-progress-bar",14),t._UZ(19,"mat-paginator",15),t.qZA()()),2&o&&(t.xp6(1),t.Oqu(i.name),t.xp6(1),t.Q6J("ngIf",!i.authService.isUserNormal()),t.xp6(4),t.Q6J("dataSource",i.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("length",i.totalElements)("pageSize",10)("pageSizeOptions",t.DdM(9,F)))},dependencies:[D.sg,D.O5,d.rH,E.Hw,L.lW,c.NW,b.pW,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk]})),s})()}}]);