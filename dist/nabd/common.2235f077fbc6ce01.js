"use strict";(self.webpackChunknabd=self.webpackChunknabd||[]).push([[592],{3570:(M,g,a)=>{a.d(g,{G:()=>_,N:()=>c});var i=a(4107),t=a(5879);const _=(m,u,d=(0,t.f3M)(i.a))=>d.getLocations(0,100),c=(m,u,d=(0,t.f3M)(i.a))=>d.getLocation(m.paramMap.get("id"))},8235:(M,g,a)=>{a.d(g,{k:()=>Y});var i=a(1180),t=a(5879),_=a(5313),c=a(3365),m=a(1933),u=a(2787),d=a(7921),E=a(4664),P=a(6306),v=a(2096),Z=a(7398),C=a(4107),T=a(7134),D=a(9280),O=a(4698),A=a(7700),h=a(617),U=a(6593),f=a(6814),R=a(2296),x=a(6007);const L=["addRegionTemp"];function I(e,o){1&e&&(t.TgZ(0,"th",19),t._uU(1," \u0627\u0633\u0645 \u0627\u0644\u062d\u0627\u0644\u0629"),t.qZA())}function b(e,o){if(1&e&&(t.TgZ(0,"td",20)(1,"a",1),t._uU(2),t.qZA()()),2&e){const s=o.$implicit;t.xp6(1),t.Q6J("routerLink","/patients/"+s.id+"/details/"),t.xp6(1),t.hij(" ",s.name," ")}}function B(e,o){1&e&&(t.TgZ(0,"th",19),t._uU(1," \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"),t.qZA())}function W(e,o){if(1&e&&(t.TgZ(0,"a",23),t._uU(1),t.qZA()),2&e){const s=o.$implicit;t.Q6J("href","tel:"+s,t.LSH),t.xp6(1),t.hij(" ",s," ")}}function K(e,o){if(1&e&&(t.TgZ(0,"td",21),t.YNc(1,W,2,2,"a",22),t.qZA()),2&e){const s=o.$implicit;t.xp6(1),t.Q6J("ngForOf",s.mobileNumbers)}}function w(e,o){1&e&&(t.TgZ(0,"th",19),t._uU(1," \u0625\u062c\u0631\u0627\u0621\u0627\u062a"),t.qZA())}function y(e,o){if(1&e){const s=t.EpF();t.TgZ(0,"td",21)(1,"div",24)(2,"a",1)(3,"button",25)(4,"span",3),t._UZ(5,"mat-icon",4),t._uU(6," \u062a\u0639\u062f\u064a\u0644 "),t.qZA()()(),t.TgZ(7,"button",26),t.NdJ("click",function(){const l=t.CHM(s).$implicit,p=t.oxw();return t.KtG(p.deletePatient(l))}),t.TgZ(8,"span",3),t._UZ(9,"mat-icon",27),t._uU(10," \u062d\u0630\u0641 "),t.qZA()(),t.TgZ(11,"button",28)(12,"span",3),t._UZ(13,"mat-icon",29),t._uU(14," \u0637\u0628\u0627\u0639\u0629 "),t.qZA()(),t.TgZ(15,"button",26),t.NdJ("click",function(){const l=t.CHM(s).$implicit,p=t.oxw();return t.KtG(p.disablePatient(l))}),t.TgZ(16,"span",30),t._UZ(17,"mat-icon",31),t._uU(18,"\n\u062a\u0639\u0637\u064a\u0644 "),t.qZA()(),t.TgZ(19,"a",1)(20,"button",25),t._UZ(21,"mat-icon",32),t._uU(22," \u0627\u0644\u0627\u062f\u0648\u064a\u0629 "),t.qZA()()()()}if(2&e){const s=o.$implicit;t.xp6(2),t.Q6J("routerLink","/patients/"+s.id+"/edit"),t.xp6(17),t.Q6J("routerLink","/patients/"+s.id+"/details/")}}function S(e,o){1&e&&t._UZ(0,"tr",33)}function H(e,o){1&e&&t._UZ(0,"tr",34)}function N(e,o){1&e&&t._UZ(0,"mat-progress-bar",35)}const Q=function(){return[10,25,100]};let Y=(()=>{var e;class o{constructor(n,r,l){(0,i.Z)(this,"dialog",void 0),(0,i.Z)(this,"iconRegistry",void 0),(0,i.Z)(this,"sanitizer",void 0),(0,i.Z)(this,"displayedColumns",["name","phone","action"]),(0,i.Z)(this,"dataSource",new _.by),(0,i.Z)(this,"name",""),(0,i.Z)(this,"isLoading",!0),(0,i.Z)(this,"totalElements",10),(0,i.Z)(this,"paginator",void 0),(0,i.Z)(this,"addRegionTemp",void 0),(0,i.Z)(this,"route",(0,t.f3M)(u.gz)),(0,i.Z)(this,"router",(0,t.f3M)(u.F0)),(0,i.Z)(this,"locationService",(0,t.f3M)(C.a)),(0,i.Z)(this,"medicineService",(0,t.f3M)(T.A)),(0,i.Z)(this,"patientService",(0,t.f3M)(D.e)),(0,i.Z)(this,"toast",(0,t.f3M)(O.jE)),this.dialog=n,this.iconRegistry=r,this.sanitizer=l,r.addSvgIconLiteral("medicine",l.bypassSecurityTrustHtml('\n<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m678-134 46-46-64-64-46 46q-14 14-14 32t14 32q14 14 32 14t32-14Zm102-102 46-46q14-14 14-32t-14-32q-14-14-32-14t-32 14l-46 46 64 64ZM735-77q-37 37-89 37t-89-37q-37-37-37-89t37-89l148-148q37-37 89-37t89 37q37 37 37 89t-37 89L735-77ZM200-200v-560 560Zm0 80q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h168q13-36 43.5-58t68.5-22q38 0 68.5 22t43.5 58h168q33 0 56.5 23.5T840-760v245q-20-5-40-5t-40 3v-243H200v560h243q-3 20-3 40t5 40H200Zm280-670q13 0 21.5-8.5T510-820q0-13-8.5-21.5T480-850q-13 0-21.5 8.5T450-820q0 13 8.5 21.5T480-790ZM280-600v-80h400v80H280Zm0 160v-80h400v34q-8 5-15.5 11.5T649-460l-20 20H280Zm0 160v-80h269l-49 49q-8 8-14.5 15.5T474-280H280Z"/></svg>\n'))}ngOnInit(){this.route.data.subscribe(n=>{this.name=n.name})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.paginator.page.pipe((0,d.O)({}),(0,E.w)(()=>(this.isLoading=!0,this.getPatient().pipe((0,P.K)(()=>(0,v.of)(null))))),(0,Z.U)(n=>null==n?[]:(this.totalElements=n.totalElements,this.isLoading=!1,n.data))).subscribe(n=>{this.dataSource=new _.by(n)})}getPatient(){return this.router.url.includes("locations")?this.locationService.getPatient(this.paginator.pageIndex,this.paginator.pageSize,this.route.snapshot.paramMap.get("id")):this.medicineService.getPatients(this.route.snapshot.paramMap.get("id"))}deletePatient(n){this.dialog.open(m.h,{disableClose:!0,data:{message:`\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0627\u0643\u062f \u0627\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 ${n.name} `}}).afterClosed().subscribe(l=>{})}disablePatient(n){this.dialog.open(m.h,{disableClose:!0,data:{message:"\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0627\u0643\u062f \u0627\u0646\u0643 \u062a\u0631\u064a\u062f \u062a\u0639\u0637\u064a\u0644 \u0627\u0644\u062d\u0627\u0644\u0629 "+n.name+"\u061f"}}).afterClosed().subscribe(l=>{this.patientService.deactivatePatient(n.id).subscribe(p=>{this.toast.success("\u062a\u0645 \u062a\u0639\u0637\u064a\u0644 \u0627\u0644\u062d\u0627\u0644\u0629",{duration:5e3,position:"top-right",theme:"snackbar"})})})}}return e=o,(0,i.Z)(o,"\u0275fac",function(n){return new(n||e)(t.Y36(A.uw),t.Y36(h.jv),t.Y36(U.H7))}),(0,i.Z)(o,"\u0275cmp",t.Xpm({type:e,selectors:[["app-patients-management"]],viewQuery:function(n,r){if(1&n&&(t.Gf(c.NW,5),t.Gf(L,5)),2&n){let l;t.iGM(l=t.CRH())&&(r.paginator=l.first),t.iGM(l=t.CRH())&&(r.addRegionTemp=l.first)}},decls:24,vars:10,consts:[[1,"text-2xl","border-r-4","border-r-primary-500","font-bold","text-primary-500","mr-5","pr-2","mb-8","mt-10"],[3,"routerLink"],["mat-raised-button","","color","primary",1,"mt-10","mr-auto","!block","ml-10"],[1,"flex","gap-2.5"],["aria-hidden","false","fontIcon","edit"],[1,"mt-10","px-10"],[1,"mat-elevation-z8","w-full"],[1,"overflow-x-auto"],["mat-table","",1,"rounded-lg",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","whitespace-nowrap",4,"matCellDef"],["matColumnDef","phone"],["mat-cell","",4,"matCellDef"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mode","indeterminate",4,"ngIf"],[3,"length","pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell","",1,"whitespace-nowrap"],["mat-cell",""],["class","underline whitespace-nowrap",3,"href",4,"ngFor","ngForOf"],[1,"underline","whitespace-nowrap",3,"href"],[1,"gap-3.5","flex"],["mat-raised-button","","color","primary"],["mat-raised-button","","color","warn",3,"click"],["aria-hidden","false","fontIcon","delete"],["mat-raised-button",""],["aria-hidden","false","fontIcon","print"],[1,"flex","gap-2.5","items-center","whitespace-nowrap"],["aria-hidden","false","fontIcon","pause"],["svgIcon","medicine","aria-hidden","false"],["mat-header-row",""],["mat-row",""],["mode","indeterminate"]],template:function(n,r){1&n&&(t.TgZ(0,"h3",0),t._uU(1),t.qZA(),t.TgZ(2,"a",1)(3,"button",2)(4,"span",3),t._UZ(5,"mat-icon",4),t._uU(6," \u0625\u0636\u0627\u0641\u0629 \u062d\u0627\u0644\u0629 "),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"table",8),t.ynx(11,9),t.YNc(12,I,2,0,"th",10),t.YNc(13,b,3,2,"td",11),t.BQk(),t.ynx(14,12),t.YNc(15,B,2,0,"th",10),t.YNc(16,K,2,1,"td",13),t.BQk(),t.ynx(17,14),t.YNc(18,w,2,0,"th",10),t.YNc(19,y,23,2,"td",13),t.BQk(),t.YNc(20,S,1,0,"tr",15),t.YNc(21,H,1,0,"tr",16),t.qZA()(),t.YNc(22,N,1,0,"mat-progress-bar",17),t._UZ(23,"mat-paginator",18),t.qZA()()),2&n&&(t.xp6(1),t.Oqu(r.name),t.xp6(1),t.MGl("routerLink","/patients/create/",r.route.snapshot.paramMap.get("id"),""),t.xp6(8),t.Q6J("dataSource",r.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("ngIf",r.isLoading),t.xp6(1),t.Q6J("length",r.totalElements)("pageSize",10)("pageSizeOptions",t.DdM(9,Q)))},dependencies:[f.sg,f.O5,u.rH,h.Hw,R.lW,c.NW,x.pW,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk]})),o})()}}]);