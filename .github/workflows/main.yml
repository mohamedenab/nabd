name: Deploy to DigitalOcean

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Set Up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Install Dependencies
        run: npm install

      - name: Build Angular App
        run: npm run build --prod

      - name: Deploy to DigitalOcean
        uses: appleboy/ssh-action@v0.7.0
        with:
          host: 157.245.123.205
          username: mohamed3nab
          key: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCpQkYfg4eb5fDcQk785S3e0OEWH7Vzw9T1Z9yGcIQZySAkhPCoST/eyQ9g3x1pDlLtoTTbuFRAbUlmGSPfSsqTAOo+i5cNOBCTHxBFJyn9qaRxX4xmWUUA8/DGFDlKBRAQcrWe1OD2WUTgU5XkpBmIN/y+JYqbO9TsksS+ozi/pGJEsbcoqtxq+lpcNKR3YyIG+HzRKhhsiuf1SFoB2dIoT1F3NgzxX/Hi8+ycEoNryGKOQRkTpCGFNoCnZFEHopzri94ZPFd3Eg0tGfrUDFPIAyV1OcD4WBW8djhTaS+wTY63DxeV7C1D2oGIX3G0HXWVLG2y6JE6fSCepButtphJKoorBPSLBLv54gHKaHNkEmQqjBwcWFcds8Iie7/nRHol3oggf3cvLnNZ6uDRH92LXH5FK9GkwFQZLnrDXya+89rL796qw5NwFs2qtaA42KWKcafIBcxP7Xd0vP3mbjoFF9zoMA9MFNdjlx6dajZNtmIv/wdlHL7VuSfr/JHFtX8= moham@DESKTOP-SDFJJV9
          script: |
            cd /var/www/html
            rm -rf *
            cp -r $GITHUB_WORKSPACE/dist/* .
